generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("MONGO_DB_URL")
}

model User {
 id      String   @id @default(auto()) @map("_id") @db.ObjectId
  name      String
  email     String   @unique
  password  String
  key       Int       
  chatId    Int      @default(0)
  role      UserRoles   @default(user)
  status    UserStatuses   @default(disabled)
  tariff    String   @default("Новый пользователь")
  balance   Int      @default(2) 
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  token  Token[]
}
enum UserStatuses {
     active 
     disabled
}
enum UserRoles {
    user 
    admin
}

model Token {
  id      String   @id @default(auto()) @map("_id") @db.ObjectId
  refreshToken   String @unique
  user   User   @relation(fields: [userId], references: [id],  onDelete: Cascade) 
  userId   String  
}