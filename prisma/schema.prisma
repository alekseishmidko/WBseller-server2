generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("MONGO_DB_URL")
}

model User {
 id      String   @id @default(auto()) @map("_id") @db.ObjectId
  name      String
  email     String   @unique
  password  String
  key       Int       
  chatId    Int      @default(0)
  role      UserRoles   @default(user)
  status    UserStatuses   @default(disabled)
  tariff    String   @default("Новый пользователь")
  balance   Int      @default(2) 
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  token  Token[]
  seller Seller[]
}
enum UserStatuses {
     active 
     disabled
}
enum UserRoles {
    user 
    admin
}

model Token {
  id      String   @id @default(auto()) @map("_id") @db.ObjectId
  refreshToken   String @unique
  user   User   @relation(fields: [userId], references: [id]) 
  userId   String 
}

model Seller {
    id      String   @id @default(auto()) @map("_id") @db.ObjectId
    sellerWBtoken String 
    sellerName  String
    taxingPercent Int
    taxingType TaxCategories 
    user   User   @relation(fields: [userId], references: [id]) 
    userId   String
}

enum TaxCategories {
totalRetailAmountFromSales  //{ title: "Продано ВБ", index: "27", value: "totalRetailAmountFromSales" },
transferForTrades // { title: "К перечислению за товар", index: "28", value: "transferForTrades" },
toBePaid// { title: "Итого к оплате", index: "40", value: "toBePaid" },
grossProfit // { title: "Валовая прибыль", index: "43", value: "grossProfit" }, 
}